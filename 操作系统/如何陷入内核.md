三种方式：

1 系统调用：用户主动调用系统调用函数陷入内核态。

2 异常：程序运行时发生缺页异常，操作系统需要陷入内核态处理缺页产生的异常保证程序的正常运行

3 外围设备的中断：如磁盘上的文件内容读取完成，操作系统会切换到硬盘读写的中断程序中处理，如果此时操作系统在用户态，会陷入到内核态。

中断：中断是一种电信号，设备有某种事件要发生时，就会产生中断，通过总线把电信号发送给中断控制器，中断控制器会把电信号发送给处理器的特定引脚。处理器于是立即停止正在处理的事情，跳到中断处理程序进行中断处理。

中断处理的速度应该快，时间短，减少对正在处理的程序的影响。并且中断处理程序会暂时关闭中断，如果中断处理的事件过长，可能会丢失其他设备的中断信号。

为了避免处理中断处理程序执行时间过长引起中断丢失或影响正常进程调度，中断分为了两个阶段。**上半部分**快速处理中断，主要负责处理跟硬件相关和时间敏感的事情。**下半部分**处理上半部分没有处理完的事情，一般以内核线程的方式运行。（解释网卡接收网络包的例子：网卡接收完数据，中断处理器传递一个信号给cpu，cpu切换到中断处理程序将网卡内的数据读到内存，更新硬件寄存器状态，硬中断处理程序完成。接着内核触发一个软中断，对内存中的数据进行分析最终传输给应用程序。）

上半部分响应快处理速度快的处理被叫做硬中断，一般由硬件外围设备引起，下半部分内核触发的耗时长，处理上部分未完成的数据的被叫做软中断。

软中断不止包括硬中断处理程序的下半部，也包括一些内核自定义事件：如线程调度等。

软中断类型：网络接收中断，网络发送中断，内核调度中断，定时中断。

硬中断：与系统相连的外设（如硬盘，网卡）自动产生的，主要通知操作系统外设状态的变化。如网卡接收到一个数据包，会产生一个中断。

软中断：中断指令产生中断号，不需要中断控制器。

