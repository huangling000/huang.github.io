硬件组成：cpu，内存，硬件

软件管理硬件：第一个加载进入内存的程序，kernel。内核会把内核所在的地址空间置为安全，为内核空间，把剩余的空间划为用户空间，并启动一个保护模式。保护模式：内核空间可以访问内存中所有地址，但用户空间中的某个程序只能访问操作系统分配给自己的这部分内存地址。内核的操作权限更高，用户空间操作权限有限，实现了程序无法对内核进行随意修改。同时CPU中的部分寄存器与指令也只有内核可以使用，而普通程序无法使用。kernel管理硬件，如网卡，硬盘，键盘鼠标。因此在kernel中有操作系统与硬件驱动程序。内核中向下管理硬件，同时向上为普通程序提供系统调用，程序通过系统调用实现对硬件的使用。因此会出现一个矛盾：程序需要使用内核提供的系统调用，但同时程序无法访问内核的地址空间，那么如何使用内核提供的系统调用？使用中断。常见的中断：时钟中断。1个CPU不能让各个程序并行执行，但会给每个程序分配一段时间去执行。

中断：CPU有一个中断向量表记录中断号以及中断的回调函数，回调函数由内核启动时注册。如时钟中断产生时，内核执行进程调度方法。内核维护一个进程队列，CPU根据调度方法决定下一个执行的进程。在进行进程切换过程中，CPU首先将当前寄存器内的一些值返回给当前进程保存，保护现场，将寄存器清空后，再将下一个进程中维护的寄存器需要的数据与指令写入CPU寄存器中，进行现场恢复。因此，时钟中断进行进程切换过程中，需要保护现场，恢复现场，在CPU与内存之间多次进行数据的拷贝。当活动进程太多，那么晶振的频率会更高，单位时间内进程间切换次数更多，进程切换导致的CPU浪费更多，程序内部占用CPU时间更短。

软中断：INT x80.  如程序需要向硬件中进行数据读写，那么编译器会在程序中嵌入中断指令，中断号为80. 当程序运行到该指令时，CPU执行该指令，该中断对应内核中的系统调用函数，首先将保护用户态应用程序现场，根据程序提供的系统调用函数名，执行对应的系统调用，执行完成后，CPU保护现场再次恢复程序运行现场。因此用户态内核态切换也会造成CPU的损耗。

IO中断：CPU不断接收硬件的数据并刷新硬件中的数据。