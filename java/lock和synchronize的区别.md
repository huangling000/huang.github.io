**线程安全**

执行控制与内存可见

执行控制目的：控制代码执行顺序是否可以并发执行。

内存可见：线程执行结果在内存中对其他线程的可见性。

**sychronized**解决的是**执行控制**的问题，阻止其他线程或许对象的监控锁。并且，**sychronized会创建一个内存屏障**，内存屏障指令保证了所有的CPU操作结果都会直接刷到主存中，保证操作的内存可见性，并且先获得锁的线程的操作都在之后获得锁的线程操作之前发生。

**volatile**关键字解决的是**内存可见性**的问题，对volatile变量的读写会直接刷到内存，保证了变量的可见性，满足对变量可见性有要求但是对读取顺序没有要求的需求。volatile只能实现对原始变量操作的原子性，不能保证符合操作的原子性。当多个线程对volatile变量进行操作时，也可能会出现写入脏数据的情况。

**volatile的使用场景**

1 对变量的写入不依赖当前的变量值，或确保只有单个线程能够改变变量的值。

2 该变量没有包含在其他变量的不变式中。？？？？

**区别**

五个角度：本质，修饰范围，变量的原子性与修改可见性，是否会引起线程的阻塞，以及是否会被编译器优化

