TCP的端到端拥塞控制：

实质：发送方根据感知到的网络拥塞程度限制自身发发送流量的速率。

三个问题：如何感知网络拥塞程度（端到端的路径上存在拥塞）？如何限制自身发送流量速率？采用何种算法改变发送流量速率？

1 如何感知网络拥塞程度（发送方到目的地之间存在拥塞）？

TCP发送方的丢包事件：A 超时 B 接收到来自接收方的三个冗余ACK。过度拥塞会引起路由器缓存溢出，数据报被丢弃，从而引起发送方的超时或接收三次冗余ack的丢包事件，此时发送方就认为到目的地上的路径已经出现拥塞。

发送方将确认的到达作为正常的指示。

2 如何限制自身发送流量速率？

发送方维护一个拥塞窗口cwnd，它限制了发送方的发送流量速率。（为了关注拥塞控制，一般将拥塞tcp缓存设置的足够大，以至于可以忽略接收窗口有rwnd的限制，那么在发送方中未被确认的数据量仅受拥塞窗口限制。）拥塞窗口cwnd限制了未被确认的数据量。

3 如何确定发送速率？

需要保证能够充分利用网络带宽，同时使网络拥塞得到控制。

一些原则（拥塞控制算法的实质）：1 一个数据报的丢失意味着拥塞发生，此时应当降低发送方的发送速率。 2 一个确认报文段说明发送方的数据成功被目的地方接收，发送方以到达的确认作为一切顺利的指示，应当响应接收的ack，增加发送方的速率 3 tcp调节传输速率的策略：增加发送速率响应到达的ACK，除非出现丢包事件，减小传输效率。

TCP拥塞控制算法：

慢启动：在拥塞窗口cwnd<ssthresh（慢启动阈值）的情况下，采用慢开始算法，即cwnd为1，当发送方收到1个确认报文，则将cwnd扩展为2，向目的方发送两个报文，接收到两个报文后，cwnd又增加2，以此类推。cwnd窗口大小增加呈指数增长。

结束慢启动的三种情况：1 达到ssthresh，使用拥塞避免算法 2 存在超时指示的丢包事件，将cwnd降为1重新开始慢启动算法，ssthresh更新为cnwd的一半。3 检测到三个冗余ack执行快速重传，进入快速恢复状态。

拥塞避免：当cwnd达到ssthresh，cwnd采用线性增长。

结束拥塞避免情况：1 出现超时的丢包情况，将cwnd降为1，ssthresh更新为cwnd的一半。2 出现收到三个冗余ack，cwnd降为一半，ssthresh降cwnd一半，进入快速恢复状态。

快速恢复：出现收到三个冗余ack，cwnd降为一半，ssthresh降cwnd一半。

TCP流量控制：发送方发送速率太快，接收方来不及接收。